#!/usr/bin/env node

var program = require('commander');
var chalk = require('chalk');
var insight = require('../insight/index');

/**
 * Usage.
 */

program
  .usage('.');

/**
 * Help.
 */

program.on('--help', function () {
  console.log('  Examples:');
  console.log();
  console.log(chalk.gray('    # examine the current project'));
  console.log('    $ cd ~/workspace/project');
  console.log('    $ head-cli insight .');
  console.log();
});

/**
 * Help.
 */

function help() {
  program.parse(process.argv)
  if (program.args.length < 1) return program.help()
}
help()

/**
 * Padding.
 */

console.log()
process.on('exit', function () {
  console.log()
})

/**
 * Settings.
 */

insight()
  .then(function () {
    console.log();
    console.log(chalk.green('    âœ” $ cat ./.head-cli/src-insight'));
    process.exit();
  })
  .catch(function (err) {
    console.log(err);
    process.exitCode = 1;
    process.exit();
  });
